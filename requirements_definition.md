# 要件定義書

## MVPの目的：「ユーザーが歩行を通じて収益を上げ、会社経営をシンプルに楽しめる基本的な体験を早期に提供すること」

### 1. 基本の歩数収益化機能

- 歩数計測と収益化:
  - 歩数計測: ヘルスコネクトAPI(Android)とApple Health(iOS)と連携して歩数をリアルタイムで計測。
  - 歩数の可視化: 日毎に折れ線グラフで表示。
- 収益に変換: 歩数を収益に変換する基本機能。一定歩数ごとにゲーム内通貨として「収益」を獲得する。通貨を使って会社を少しずつ成長させる。
  - （初期MVPモデルの場合では）収益＝総資産
    - 税金は存在しない。
    - コストは段階的に導入予定だが、初期MVPモデルでは存在しない。
  - 歩数と収益の変換：1歩50円換算


### 2. 会社管理

- 会社設立と基本管理:
  - 会社の設立: ゲーム開始時に簡単に「会社のジャンル」を選び、自由に会社名を設定する機能。選んだジャンルにより、ステータスなどの特性が異なる。
    - ステータスの差分は、初期MVPモデルでは存在しない。
  - 会社のジャンル：
    - IT
    - 製造
    - 飲食
    - 運輸
    - 広告
    - 建築
  - 会社名：
    - ユーザーが自由に入力できる。
      - 会社のジャンル選択(Flutterで実装)→会社名を入力(Flutterで実装)→会社の設置場所(Unityで実装)→会社設立(Unityで実装)
  - 会社の設置場所：
    - Unityで実装。
    - あらかじめ選択できる場所が限られており、その中から選択する。
    - 左右の矢印を表示させて、それを選択もしくはスワイプで新しい領地が表示される。

  - コスト: 獲得した収益を使って会社を拡大する基本機能。例えば、従業員の雇用や設備の購入を通じて、収益を効率的に増やすことができる。
    - 初期MVPには含めない。
      - コストの機能を実装するのであれば、「収益＝総資産」の決まりを変更する必要がある。
  - 会社のランク制度: 総資産による会社のランク付けを行い、ランクごとに一歩あたりの収益が上昇する。
    - ランク
      - ランク1：スタートアップ
        - 条件：総資産が0~50,000円
        - 特典：歩数と収益の変換が50円/歩
      - ランク2：ローカルビジネス
        - 条件：総資産が50,001~325,000円
        - 特典：歩数と収益の変換が75円/歩
      - ランク3：地域企業
        - 条件：総資産が325,001~1,000,000円
        - 特典：歩数と収益の変換が100円/歩
      - ランク4：中小企業
        - 条件：総資産が1,000,001~5,000,000円
        - 特典：歩数と収益の変換が150円/歩
      - ランク5：大企業
        - 条件：総資産が5,000,001~100,000,000円
        - 特典：歩数と収益の変換が300円/歩
      - ランク6：グローバル企業
        - 条件：総資産が100,000,001~1,000,000,000円
        - 特典：歩数と収益の変換が500円/歩
  - 収益の可視化:
    - 収益の推移をグラフで可視化する。
      - 収益（総資産）：日毎に折れ線グラフで表示。

### 3. すれ違い通信による対戦要素

- 歩数バトル: 近距離無線通信（BLE）で他のユーザーとすれ違った際に、簡単な「歩数対決」を行い、歩数が多いユーザーが相手の一部の収益を獲得する機能を実装。
  - 獲得分（奪われる分）のお金（総資産）＝「その日の自分と相手の歩数の差 × 4倍」
    - 初期MVPモデルでは、固定の倍率（4倍）で実装。
    - 余裕があればランクの差で倍率を変更する。（初期MVPモデルには含めない）
      - 近いランク同士：倍率が高め
      - 遠いランク同士：倍率が低め
- 勝敗のシンプルなフィードバック: バトルの結果をアニメーションまたはシンプルな画面で表示し、歩数差に基づく収益の獲得を視覚的にユーザーに伝える。
  - Unityで実装。

### 4. コア機能の優先度
上から順に優先度が高い。
  - 会社管理: 収益を使って会社を成長させる部分を最低限実装し、ユーザーのモチベーションを保つ。
  - 歩数計測と収益化機能: アプリの基盤となる部分であり、ユーザーが歩くことで価値を生む基本機能。最優先で実装。
  - 歩数バトル: すれ違い通信による対決要素を導入し、他のユーザーとのインタラクションを可能にする。これにより、シンプルでもゲーム性が増す。

### 5. 技術要件

README.mdに記載している通り。
- 毎日の歩数データはローカルストレージに保存。
- UnityとFlutterの連携はflutter_unity_widgetを使用。
